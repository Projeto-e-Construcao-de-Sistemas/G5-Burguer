(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(root.mainApp.controller){root.mainApp.controller.module=factory(mainApp.controller,window.jQuery||window.$)}else if(root.mainApp){root.mainApp.controller=factory(mainApp,window.jQuery||window.$)}else{console.error('Main application was not loaded')}}(typeof self!=='undefined'?self:this,function(parent,$){'use strict';const dataModel={'id':0,'consultant_id':0,'name':'','email':'','phone':'','document_number':'','birth_date':'','seller':0,'professional':0,'admin':0,'registration_ip':'','suspended':0};const dataConv={'consultant_id':val=>parseInt(val,10),'phone':val=>(val||''),'document_number':val=>(val||''),'birth_date':val=>(val||''),'seller':val=>parseInt(val,10),'professional':val=>parseInt(val,10),'admin':val=>parseInt(val,10),'suspended':val=>parseInt(val,10),};const addressModel={'id':0,'user_id':0,'name':'','zip_code':'','address':'','number':'','complement':'','neighborhood':'','city':'','state':''};const suspendedIcon={'0':htmlIcon({className:'fa-check text-green',title:'Ativo'}),'1':htmlIcon({className:'fa-ban text-red',title:'Suspenso'})};const actDemote=$('[data-form-action="demote"]');const actPromote=$('[data-form-action="promote"]');const actReactivate=$('[data-form-action="reactivate"]');const actSuspend=$('[data-form-action="suspend"]');const filterConsult=$('#filter-consultant_id');const filterEmail=$('#filter-email');const filterName=$('#filter-name');const filterType=$('#filter-type');const filterSuspended=$('#filter-suspended');const inpId=$('#record-id');const inpAddrId=$('#address-id');const editBirth=$('#edit-birth_date');const editConsult=$('#edit-consultant_id');const editName=$('#edit-name');const editEmail=$('#edit-email');const editPhone=$('#edit-phone');const editDocument=$('#edit-document_number');const editAddrNam=$('#edit-address-name');const editAddrZip=$('#edit-address-zip_code');const editAddrStr=$('#edit-address-address');const editAddrNum=$('#edit-address-number');const editAddrCpl=$('#edit-address-complement');const editAddrNgb=$('#edit-address-neighborhood');const editAddrCit=$('#edit-address-city');const editAddrStt=$('#edit-address-state');const formAddr=$('#form-address');const isApple=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);let currentRecord=$.objectNormalizer(dataModel,dataModel);let currentAddress=addressModel;const buildPayload=()=>{return{'consultant_id':parseInt(editConsult.val()||0,10),'name':editName.val(),'email':editEmail.val(),'phone':editPhone.val(),'document_number':editDocument.val(),'birth_date':$.brDateFormat(editBirth.val()),}};const canFilter=()=>{if(filterName.val()&&filterName.val().length<3){mainApp.showError('Tente ser mais específico.<br>Texto muito pequeno para filtrar pelo nome.');return!1}
return!0};const canTogglePro=status=>{const enabled=parseInt(currentRecord.suspended,10)===0;const isPro=parseInt(currentRecord.professional,10)===1;return enabled&&isPro!==status&&$.hasAdmModule('users','corp')};const canToggleSuspension=status=>{const enabled=parseInt(currentRecord.suspended,10)===0;return enabled===status&&$.hasAdmModule('users','write')};const changeUserFlag=(method,message)=>{mainApp.ajax({url:`users/${currentRecord.id}/${method}`,method:'PUT',data:{embCnt:1,},success:result=>{setRecord(result);fillEditForm();history.back();$.success(`Cliente ${message} com sucesso.`)},error:()=>{history.back()}})};const checkSuspended=()=>{const suspended=parseInt(currentRecord.suspended,10)==1;const span=document.createElement('span');inpId.toggleClass('text-red',suspended);$('#main-form .form-group').toggleClass('has-error',suspended);span.className='label label-danger text-sm';span.innerText='SUSPENSO';if(suspended){inpId.append(' ').append(span.outerHTML)}};const clearFilter=()=>{filterConsult.val('').trigger('change')};const confirmations=(params={})=>{return{addressDelete:{title:'Exclusão',content:'Confirma a exclusão definitiva desse endereço?',action:()=>{mainApp.ajax({url:`addresses/${params}`,method:'DELETE',success:()=>{history.back();tableAddresses.draw();setTimeout(()=>{if(formAddr.is(':visible')){history.back()}},500)},error:()=>history.back()})}},creditcardDelete:{title:'Exclusão',content:'Confirma a exclusão desse cartão?',action:()=>{mainApp.ajax({url:`cards/${params}`,method:'DELETE',success:()=>{tableCreditCards.draw();history.back()},error:()=>history.back()})}},demotePro:{title:'',content:`Confirma a remoção de<br>${params.name}?`,action:()=>changeUserFlag('demote','desassociado')},promotePro:{title:'',content:``,action:()=>changeUserFlag('promote','associado')},reactivate:{title:'Reativação',content:`Confirma a reativação da conta de<br>${params.name}?`,action:()=>changeUserFlag('reactivate','reativado')},suspend:{title:'Desativação',content:`Confirma a suspensão da conta de<br>${params.name}?`,action:()=>changeUserFlag('suspend','suspenso')}}};const confirmProDel=()=>{if(!canTogglePro(!1)){$.error('Usuário não pode ser desassociado do corporativo.');history.back();return}
$.confirmAction(confirmations(currentRecord),'demotePro')};const confirmProAccess=()=>{if(!canTogglePro(!0)){$.error('');history.back();return}
$.confirmAction(confirmations(currentRecord),'promotePro')};const confirmReactivation=()=>{if(!canToggleSuspension(!1)){$.error('Usuário não pode ser reativado.');history.back();return}
$.confirmAction(confirmations(currentRecord),'reactivate')};const confirmSuspension=()=>{if(!canToggleSuspension(!0)){$.error('Usuário não pode ser suspenso.');history.back();return}
$.confirmAction(confirmations(currentRecord),'suspend')};const dataFilter=()=>{let filter={};if(filterConsult.val().length){filter.consultant_id=filterConsult.val()}
if(filterName.val().trim()){filter.name=filterName.val().trim()}
if(filterEmail.val().trim()){filter.email=filterEmail.val().trim()}
if(filterType.val()){filter.type=filterType.val()}
if(filterSuspended.val()){filter.suspended=filterSuspended.val()}
return filter};const fillEditForm=()=>{inpId.text(currentRecord.id);$('#edit-uuid').val(currentRecord.uuid);editName.val(currentRecord.name);editEmail.val(currentRecord.email);editPhone.val(currentRecord.phone);editDocument.inputmask('setvalue',currentRecord.document_number||'');$('#edit-balance').val($.brlFormat(currentRecord.balance));$('#edit-registration_ip').val(currentRecord.registration_ip);$('#edit-created_at').val(mainApp.formatDateTime(currentRecord.created_at));if(isApple){editBirth.val(mainApp.formatDate(currentRecord.birth_date))}else{editBirth.datepicker('update',mainApp.formatDate(currentRecord.birth_date))}
setAttribute('facebook',currentRecord.fb_id?1:0);setAttribute('professional',currentRecord.professional);setAttribute('shopkeeper',currentRecord.seller);setAttribute('admin',currentRecord.admin);setConsultant();checkSuspended();mainApp.setFocus(editName)};const fillEditFormAddress=()=>{inpAddrId.text(currentAddress.id);editAddrNam.val(currentAddress.name);editAddrZip.val(currentAddress.zip_code);editAddrStr.val(currentAddress.address);editAddrNum.val(currentAddress.number);editAddrCpl.val(currentAddress.complement);editAddrNgb.val(currentAddress.neighborhood);editAddrCit.val(currentAddress.city);editAddrStt.val(currentAddress.state);mainApp.setFocus(editAddrNam)};const getAddress=addressId=>{if(!addressId){history.back();return}
if(addressId===currentAddress.id){fillEditFormAddress();return}
currentAddress=addressModel;mainApp.ajax({url:`addresses/${addressId}`,method:'GET',success:result=>{currentAddress=$.objectNormalizer(result,addressModel);fillEditFormAddress()},error:()=>{history.back()}})};const messagePerson=data=>{if(!data.message||!data.message.conversation){return'Erro!'}
if(data.message.sender_user_id===currentRecord.id){return parent.personUserHyperlink(data.message.receiverUser,data.message.receiverStore)}
return parent.personUserHyperlink(data.message.senderUser,data.message.senderStore)};const resetRecord=()=>{setRecord(dataModel)};const setAttribute=(name,value)=>{const isOn=parseInt(value,10)===1;$(`#info-${name}`).val(isOn?'Sim':'Não');$(`#sign-${name}`).toggleClass('text-green',isOn).toggleClass('text-gray',!isOn)};const setConsultant=()=>{if((typeof currentRecord.consultant==='undefined')||(typeof currentRecord.consultant.name==='undefined')||(!currentRecord.id)){editConsult.val(null).trigger('change');return}
if(!editConsult.find(`option[value="${currentRecord.consultant.id}"]`).length){const newOption=new Option(currentRecord.consultant.name,currentRecord.consultant.id,!1,!1);editConsult.append(newOption)}
editConsult.val(currentRecord.consultant.id).trigger('change')};const setRecord=data=>{currentRecord=$.objectNormalizer(data,dataModel,dataConv)};const situationTag=code=>{const texts={'0':'Novo','1':'Em cotação','2':'Em aprovação','3':'Pronto','4':'Aprovado','5':'Expirado','6':'Excluído','7':'Descontinuado',};const colors={'0':'aqua-gradient','1':'maroon-gradient','2':'yellow-gradient','3':'light-blue-gradient','4':'green-gradient','5':'gray-active','6':'black-gradient','7':'red-gradient',};if(!texts[code]){return''}
const label=document.createElement('span');label.className=`label bg-${colors[code]} text-sm`;label.innerText=texts[code];return label.outerHTML};const tableAddresses=$('#users-addresses').setDataTable({ordering:!1,ajax:{url:'addresses',method:'GET',data:data=>{data.filter={'user_id':currentRecord.id}}},columns:[{data:'name',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`#${currentRecord.id}/address:${row.id}`,text:data})}},{data:'address',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`#${currentRecord.id}/address:${row.id}`,text:data})}},{data:'number',className:'text-right text-nowrap',},{data:'complement',className:'text-nowrap',},{data:'neighborhood',className:'text-nowrap',},{data:'city',className:'text-nowrap',},{data:'state',className:'text-nowrap',width:'1%'},{data:'zip_code',className:'text-nowrap',render:$.formatZIP,width:'1%'},{data:null,className:'text-center text-nowrap',orderable:!1,type:'html',width:'1%',render:data=>{return parent.rowActions([{href:`#${currentRecord.id}/address:${data.id}`,icon:'pencil',title:'Editar',disabled:!1},{href:`#${currentRecord.id}/address:${data.id}/delete`,icon:'trash',title:'Excluir',disabled:!1,target:!1}])}}],}).on('draw',()=>{deleteOverlay('#users-addresses');tableAddresses.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-addresses')}});const tableCreditCards=$('#users-cards').setDataTable({ajax:{url:'cards',method:'GET',data:data=>{data.filter={'user_id':currentRecord.id}}},columns:[{data:'gateway',className:'text-nowrap',render:data=>{return decision(data,{'1':'Moip','2':'Pagar.me'})}},{data:'card_flag',className:'text-nowrap',},{data:'card_last_digits',className:'text-nowrap',width:'1%'},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},{data:null,className:'text-center text-nowrap',orderable:!1,type:'html',width:'1%',render:data=>{return parent.rowActions([{href:`#${currentRecord.id}/credit-cards:${data.id}/delete`,icon:'trash',title:'Excluir',disabled:!1}])}}],ordering:!1}).on('draw',()=>{deleteOverlay('#users-cards');tableCreditCards.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-cards')}});const tableCollections=$('#users-collections').setDataTable({ajax:{url:'collections',method:'GET',data:data=>{data.filter={'user_id':currentRecord.id}}},columns:[{data:'name',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`/collections#${row.id}`,text:data})}},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},],order:[[0,'asc']]}).on('draw',()=>{deleteOverlay('#users-collections');tableCollections.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-collections')}});const tableMessages=$('#users-messages').setDataTable({ajax:{url:'user-messages',method:'GET',error:mainApp.ajaxError,data:data=>{data.filter={user_id:currentRecord.id}}},columns:[{data:null,orderable:!1,className:'text-center text-nowrap',type:'html',width:'1%',render:data=>{if(data.message.sender_user_id===currentRecord.id){return htmlIcon({className:'fa-share text-primary',title:'Out'})}
return htmlIcon({className:'fa-reply text-warning',title:'In'})}},{data:'was_read',orderable:!1,className:'text-center text-nowrap',type:'html',width:'1%',render:data=>{if(data==='1'){return htmlIcon({className:'fa-envelope-open-o text-gray',titla:'Lida'})}
return htmlIcon({className:'fa-envelope-o',title:'Não lida'})}},{data:'message.moderation',orderable:!1,className:'text-center text-nowrap',type:'html',width:'1%',render:parent.messageSituationIcon},{data:null,className:'text-nowrap',orderable:!1,render:messagePerson},{data:'message.conversation.subject',className:'text-nowrap',orderable:!1,render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`/messages#${row.message_id}`,text:data})}},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},{data:null,className:'text-center text-nowrap',orderable:!1,render:function(data){return parent.rowActions([{href:`/messages#${data.message_id}`,icon:'eye',title:'Ver detalhes'+(data.message.moderation==='0'?' | Moderar':''),disabled:!1},{href:`/messages#${data.message_id}/conversation`,icon:'comments',title:'Ver toda a conversa',disabled:!1}])},type:'html',width:'1%'}],order:[[5,'desc']]}).on('draw',()=>{deleteOverlay('#users-messages');tableMessages.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-messages')}});const tableOrders=$('#users-orders').setDataTable({ajax:{url:'orders',method:'GET',data:data=>{data.filter={'user_id':currentRecord.id}}},columns:[{data:'order_number',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`/orders#${row.id}`,text:data})},type:'html',width:'1%'},{data:'situation',className:'text-center',render:parent.orderSituationIcon,width:'1%'},{data:'referral',orderable:!1,className:'text-center',render:parent.orderReferralIcon,type:'html',width:'1%'},{data:'items_quantity',orderable:!1,className:'text-right text-nowrap',width:'1%',},{data:'products_value',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:'shipping_value',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:'discount_value',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:'interest_value',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:null,orderable:!1,className:'text-right text-nowrap',render:data=>{return $.brlFormat(parseFloat(data.products_value)+parseFloat(data.shipping_value)+parseFloat(data.interest_value),2,',','.')},width:'1%'},{data:'total_paid',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:'returned_value',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:'approved_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},],order:[[0,'desc']]}).on('draw',()=>{deleteOverlay('#users-orders');tableOrders.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-orders')}});const tableShoppingCart=$('#users-cart').setDataTable({ordering:!1,ajax:{url:'carts/user',method:'GET',error:mainApp.ajaxError,data:data=>{data.id=currentRecord.id}},columns:[{data:null,className:'text-nowrap',render:data=>{return htmlLink({href:`/products#${data.product.id}`,text:data.product.name})}},{data:'product.variation.name',className:'text-nowrap',},{data:null,className:'text-nowrap',orderable:!1,render:data=>{return htmlLink({href:'/designers#'+data.designer.id,text:data.designer.name})}},{data:null,className:'text-nowrap',render:data=>{return htmlLink({href:'/stores#'+data.store.id,text:data.store.name})}},{data:'quantity',className:'text-right text-nowrap',width:'1%'}],dom:'<"row"<"col-sm-12"tr>>',order:[],paging:!1}).on('draw',()=>{deleteOverlay('#users-cart');tableShoppingCart.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-cart')}});const tableStatements=$('#users-statement').setDataTable({ajax:{url:'user-statement',method:'GET',error:mainApp.ajaxError,data:data=>{data.filter={'user_id':currentRecord.id}}},columns:[{data:'id',className:'text-right',width:'1%'},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},{data:'description',className:'text-nowrap',orderable:!1},{data:'reference_id',orderable:!1,className:'text-right text-nowrap',width:'1%'},{data:'transaction_value',orderable:!1,className:'text-right text-nowrap',render:data=>{const value=parseFloat(data);const span=document.createElement('span');span.className=(value<0)?'text-red':'text-blue';span.innerText=$.brlFormat(value);return span.outerHTML},width:'1%'}],order:[[1,'desc']]}).on('draw',()=>{deleteOverlay('#users-statement');tableStatements.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-statement')}});const tableQuotes=$('#users-quotes').setDataTable({ajax:{url:'quotes',method:'GET',error:mainApp.ajaxError,data:data=>{data.embRsp=1;data.filter={'user_id':currentRecord.id}}},columns:[{data:'id',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`/quotes#${row.id}`,text:data})},type:'html',width:'1%'},{data:'name',className:'text-nowrap',orderable:!1,render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`/quotes#${row.id}`,text:data})},type:'html',width:'1%'},{data:'situation',className:'hidden-xs text-center text-nowrap',render:situationTag,width:'1%'},{data:null,className:'hidden-xs',orderable:!1,render:data=>{if(!data.responsible.id){return'Nenhum responsável'}
return htmlLink({href:'/users#'+data.responsible.id,text:data.responsible.name})}},{data:'total',orderable:!1,className:'text-right text-nowrap',render:$.brlFormat,width:'1%'},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},{data:'updated_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'}],order:[[2,'asc']]}).on('draw',()=>{deleteOverlay('#users-favorites');tableQuotes.columns.adjust()}).on('processing',(e,settings,processing)=>{if(processing){addOverlay('#users-favorites')}});if(isApple){editBirth.inputmask({alias:'datetime',inputFormat:'dd/mm/yyyy',clearIncomplete:!0,})}else{editBirth.datepicker({autoclose:!0,dateFormat:'dd/mm/yy',changeMonth:!0,changeYear:!0,endDate:'-1d',language:'pt-BR',orientation:'bottom'})}
editPhone.inputmask({mask:['(99) 9999-9999','(99) 99999-9999'],greedy:!0,clearIncomplete:!0});editDocument.brazilianDocInputMask();editAddrZip.zipEdit(result=>{editAddrStr.val(result.log_nome);editAddrNum.val(result.log_number);editAddrCpl.val('');editAddrNgb.val(result.bai_no);editAddrCit.val(result.loc_nosub);editAddrStt.val(result.ufe_sg);mainApp.setFocus(editAddrNum)});editConsult.setSelectUser(term=>{return{'name':term,'type':'admin',}},{closeOnSelect:!0,});filterConsult.setSelectUser(term=>{return{'name':term,'type':'admin',}});formAddr.on('submit',evt=>{evt.preventDefault();mainApp.ajax({url:`addresses/${currentAddress.id}`,method:'PUT',data:{'name':editAddrNam.val(),'zip_code':editAddrZip.val().replace(/\D/g,''),'address':editAddrStr.val(),'number':editAddrNum.val(),'complement':editAddrCpl.val(),'neighborhood':editAddrNgb.val(),'city':editAddrCit.val(),'state':editAddrStt.val()},dataType:'json',success:result=>{currentAddress=$.objectNormalizer(result,addressModel);tableAddresses.draw();$.success('Endereço salvo com sucesso.')}})});$('[data-save="address"]').on('click',evt=>{evt.preventDefault();formAddr.submit()});return{actions:{'address':getAddress,'address/delete':addrId=>$.confirmAction(confirmations(addrId),'addressDelete'),'credit-cards/delete':cardId=>$.confirmAction(confirmations(cardId),'creditcardDelete'),'demote':confirmProDel,'promote':confirmProAccess,'suspend':confirmSuspension,'reactivate':confirmReactivation,},canFilter:canFilter,currentRecord:()=>currentRecord,dataTableObj:{ajax:{url:'users',method:'GET',error:mainApp.ajaxError,data:data=>{data.filter=dataFilter()}},columns:[{data:'admin',visible:!1},{data:'seller',visible:!1},{data:'professional',visible:!1},{data:'suspended',className:'text-center text-nowrap',width:'1%',render:data=>{return decision(data,suspendedIcon)}},{data:null,className:'text-center text-nowrap',orderData:[0,1,2,3],width:'1%',render:data=>{let icon='fa-user';let title='Cliente';if(data.admin==='1'){icon='fa-user-secret';title='Administrador'}else if(data.seller==='1'){icon='fa-university';title='Lojista'}else if(data.professional==='1'){icon='fa-graduation-cap';title='Profissional'}
return htmlIcon({className:icon,title:title})}},{data:'name',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`#${row.id}`,text:data})}},{data:'email',className:'text-nowrap',render:(data,type,row)=>{if(type!=='display'){return data}
return htmlLink({href:`#${row.id}`,text:data})}},{data:'created_at',className:'text-nowrap',render:mainApp.formatDateTime,width:'1%'},],order:[[3,'asc'],[5,'asc']],stateSave:!0},fillDetails:fillEditForm,formChangeInspect:()=>{const payload=$.objectNormalizer(buildPayload(),currentRecord,dataConv);return!Object.isSimilar(currentRecord,payload)},formCommandsToggler:()=>{actDemote.toggle(canTogglePro(!1));actPromote.toggle(canTogglePro(!0));actReactivate.toggle(canToggleSuspension(!1));actSuspend.toggle(canToggleSuspension(!0))},formSave:()=>{mainApp.ajax({url:`users/${currentRecord.id}`,method:'PUT',data:buildPayload(),dataType:'json',success:result=>{setRecord(result);$.success('Cliente salvo com sucesso.')}})},getRecord:(rowId,callback)=>{mainApp.ajax({url:`users/${rowId}`,method:'GET',data:{embCnt:1,},success:result=>{setRecord(result);callback()},error:()=>{location.hash=''}})},isFiltering:()=>{return filterConsult.val().length||filterName.val()||filterEmail.val()||filterType.val()||filterSuspended.val()},resetRecord:resetRecord,resetFilter:clearFilter,sidebarSearchForm:search=>{clearFilter();if(mainApp.testEmail(search)){filterEmail.val(search);return canFilter()}
filterName.val(search);return canFilter()},init:()=>{}}}))