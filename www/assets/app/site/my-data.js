(function(root,factory){if(typeof define==='function'&&define.amd){define(['root','jquery'],factory)}else if(root.mainApp){root.mainApp.controller=factory(root,root.mainApp,window.jQuery||window.$)}else{console.error('Main application was not loaded')}}(typeof self!=='undefined'?self:this,function(root){'use strict';const myDataForm=$('#my-data-form');const inpName=$('#name');const inpEmail=$('#email');const inpZip_code=$('#zip-code');const inpPassword=$('#password');const inpPhone=$('#phone');function fillInput(){mainApp.ajax({url:`users/${$('#my-data').attr('data-id')}`,method:'GET',data:{},dataType:'json',success:result=>{inpName.val(result.name);inpEmail.val(result.email);inpZip_code.val(result.zip_code);inpPhone.val(result.phone)}})}
const autoSelect=function(){$(this).select()};inpPhone.inputmask({mask:['(99) 9999-9999','(99) 99999-9999'],clearIncomplete:!0}).on('focus',autoSelect);inpZip_code.inputmask({mask:['99999-999'],clearIncomplete:!0}).on('focus',autoSelect);myDataForm.submit(function(evt){evt.preventDefault();let data={};if(inpName.val()){data.name=inpName.val()}
if(inpEmail.val()){data.email=inpEmail.val()}
if(inpPassword[0].value){data.password=inpPassword.val()}
if(inpPhone){data.phone=inpPhone.val()}
mainApp.ajax({url:`perfil/save`,method:'PUT',data:{data},dataType:'json',success:reload,});console.log(data)});$('#eye').mousedown(function(evt){inpPassword.attr('type','text');$('#eye').addClass('fa-eye-slash');$('#eye').removeClass('fa-eye')});$('#eye').mouseup(function(evt){inpPassword.attr('type','password');$('#eye').removeClass('fa-eye-slash');$('#eye').addClass('fa-eye')});const reload=()=>{addOverlay('body');location.reload()};return{init:function(){fillInput()}}}))