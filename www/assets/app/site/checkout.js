(function(root,factory){if(typeof define==='function'&&define.amd){define(['root','jquery'],factory)}else if(root.mainApp){root.mainApp.controller=factory(root,root.mainApp,window.jQuery||window.$)}else{console.error('Main application was not loaded')}}(typeof self!=='undefined'?self:this,function(root){'use strict';const zip=$('#cep');const autoSelect=function(){$(this).select()};zip.inputmask({mask:['99999-999'],clearIncomplete:!0}).on('focus',autoSelect);$('#cep').on('blur',evt=>{let zip=$('#cep').val();if(!zip){return}
mainApp.ajax({url:'checkout/getZip',method:'POST',data:{'zip':zip,},dataType:'json',success:(result)=>{console.log(result.bairro);$('#address').val(result.rua);$('#address2').val(result.bairro)},})});$('#remove').on('click',()=>{mainApp.ajax({url:'cart/deleteCart',method:'DELETE',data:{},dataType:'json',success:()=>{history.back()},error:console.log("Outro teste"),})});$('#buy-form').submit(function(evt){evt.preventDefault();mainApp.ajax({url:'orders/create',method:'POST',data:{'rua':$('#address').val(),'bairro':$('#address2').val(),'numero':$('#number').val(),'comp':$('#comp').val(),'cep':$('#cep').val(),'pagamento':$('#payment').val()},dataType:'json',success:()=>{history.back()},error:console.log("Outro teste"),})});return{init:function(){}}}))